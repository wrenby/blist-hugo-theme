{{ define "main" }}
  {{ $lastmodstr := (partial "date.html" (dict "date" .Lastmod "language" $.Page.Language "format" "long")) }}
  {{ $datestr := (partial "date.html" (dict "date" .Date "language" $.Page.Language "format" "long")) }}

  {{ with $image := resources.GetMatch .Params.featured_image }}
    <div class="relative max-w-5xl mx-auto px-4">
      <a href="{{ $image.RelPermalink }}">
        {{ $small := $image.Resize "512x jpg q90 Lanczos" }}
        {{ $medium := $image.Resize "768x jpg q90 Lanczos" }}
        {{ $large := $image.Resize "1024x jpg q90 Lanczos" }}
        <div class="relative">
          <img
            srcset="
              {{- with $small.RelPermalink -}}, {{.}} 512w{{- end -}}
              {{- with $medium.RelPermalink -}}, {{.}} 768w{{- end -}}
              {{- with $large.RelPermalink -}}, {{.}} 1024w{{- end -}}"
            src="{{ $large.RelPermalink }}"
            sizes="100vw"
            alt="{{ .Params.title }}"
            class="rounded-lg shadow-sm w-full object-contain" />
            <div class="absolute top-4 right-4 rounded shadow bg-white text-gray-900 dark:bg-gray-900 dark:text-white px-2 py-0.5">
              {{ $datestr }}
            </div>
        </div>
      </a>
    </div>
  {{ end }}

  <article class="prose lg:prose-lg mx-auto my-8 dark:prose-dark px-4">

    <h1 class="text-2xl font-bold mb-2">{{ .Title }}</h1>
    <h5 class="text-sm flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 1 1" stroke="currentColor" stroke-opacity="1" fill="none" stroke-width ="0.1px">
        <path d="M 0.65115525,0.32215321 A 0.15115766,0.13323815 0 0 1 0.49999766,0.45539141 0.15115766,0.13323815 0 0 1 0.3488398,0.32215321 0.15115766,0.13323815 0 0 1 0.49999766,0.18891501 0.15115766,0.13323815 0 0 1 0.65115525,0.32215321 Z" />
        <path style="stroke-linecap:butt;stroke-linejoin:miter" d="m 0.83260918,0.32599021 c -0.00108,0.0882632 -0.063641,0.24210929 -0.31319537,0.53148933 -0.0107593,0.012476 -0.028443,0.0125148 -0.0392774,8.349e-5 C 0.25626899,0.60068369 0.18285331,0.45073965 0.16948767,0.35455177 c -0.002157,-0.0155668 -0.002686,-0.0410861 -0.001198,-0.0567266 0.008123,-0.0849283 0.0582978,-0.16243335 0.13720766,-0.21225886 0.0144338,-0.009113 0.0393992,-0.0218826 0.055529,-0.0283957 0.0981092,-0.03961602 0.2128508,-0.03516436 0.30714361,0.0130201 0.10360067,0.0529408 0.16644137,0.15070061 0.1644298,0.25579883" />
      </svg>

      <div>
        {{- partial "definition.html" (dict "term" "RA" "global" $) -}}
        /
        {{- partial "definition.html" (dict "term" "Dec" "global" $) }}
        ({{- partial "definition.html" (dict "term" "J2000" "global" $) -}}):
        {{ .Params.ra }}/{{ .Params.dec }}
      </div>
    </h5>

    {{ .Content }}
  </article>

  {{- partialCached "social.html" . -}}
{{ end }}
